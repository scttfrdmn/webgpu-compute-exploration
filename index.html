<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebGPU Compute Exploration</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a1a;
            color: #e0e0e0;
        }
        h1 {
            color: #4fc3f7;
        }
        .example {
            background: #2a2a2a;
            border: 1px solid #444;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .example h2 {
            margin-top: 0;
            color: #81c784;
        }
        button {
            background: #4fc3f7;
            color: #1a1a1a;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }
        button:hover {
            background: #29b6f6;
        }
        button:disabled {
            background: #555;
            cursor: not-allowed;
        }
        .output {
            background: #1a1a1a;
            border: 1px solid #555;
            padding: 15px;
            margin-top: 10px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
        .error {
            color: #ff5252;
        }
        .success {
            color: #81c784;
        }
        .info {
            color: #4fc3f7;
        }
        canvas {
            border: 1px solid #555;
            margin-top: 10px;
        }
        canvas.interactive {
            cursor: crosshair;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .status.supported {
            background: #1b5e20;
            border: 1px solid #2e7d32;
        }
        .status.not-supported {
            background: #b71c1c;
            border: 1px solid #c62828;
        }
        .controls {
            margin: 15px 0;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
        }
        .controls label {
            color: #aaa;
            margin-right: 5px;
        }
        .controls input[type="range"] {
            width: 150px;
        }
        .seed-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 10px;
        }
        .seed-buttons button {
            padding: 8px 15px;
            font-size: 14px;
        }
        button.active {
            background: #81c784;
        }
    </style>
</head>
<body>
    <h1>üöÄ WebGPU Compute Exploration</h1>

    <div id="gpu-status" class="status">
        Checking WebGPU support...
    </div>

    <div class="example">
        <h2>1. Basic Compute: Vector Addition</h2>
        <p>Demonstrates parallel computation by adding two vectors of numbers on the GPU.</p>
        <button id="btn-vector-add">Run Vector Addition</button>
        <div id="output-vector-add" class="output"></div>
    </div>

    <div class="example">
        <h2>2. Matrix Multiplication</h2>
        <p>Performs matrix multiplication using compute shaders - a fundamental operation in ML and graphics.</p>
        <button id="btn-matrix-mul">Run Matrix Multiplication</button>
        <div id="output-matrix-mul" class="output"></div>
    </div>

    <div class="example">
        <h2>3. Image Processing: Gaussian Blur</h2>
        <p>Applies a Gaussian blur filter to an image using compute shaders.</p>
        <button id="btn-image-blur">Run Image Blur</button>
        <canvas id="canvas-original" width="512" height="512"></canvas>
        <canvas id="canvas-blurred" width="512" height="512"></canvas>
        <div id="output-image-blur" class="output"></div>
    </div>

    <div class="example">
        <h2>4. Conway's Game of Life</h2>
        <p>Interactive cellular automaton simulation running entirely on GPU with compute shaders.</p>

        <div class="controls">
            <button id="btn-gol-start">‚ñ∂ Start</button>
            <button id="btn-gol-pause">‚è∏ Pause</button>
            <button id="btn-gol-step">‚è≠ Step</button>
            <button id="btn-gol-clear">Clear</button>
            <button id="btn-gol-random">Random</button>
            <label>Speed:</label>
            <input type="range" id="gol-speed" min="1" max="60" value="10">
            <span id="gol-speed-value">10 fps</span>
        </div>

        <div class="seed-buttons">
            <strong style="color: #aaa; width: 100%;">Classic Patterns:</strong>
            <button class="seed-btn" data-seed="glider">Glider</button>
            <button class="seed-btn" data-seed="lwss">Lightweight Spaceship</button>
            <button class="seed-btn" data-seed="pulsar">Pulsar</button>
            <button class="seed-btn" data-seed="pentadecathlon">Pentadecathlon</button>
            <button class="seed-btn" data-seed="gosper-gun">Gosper Glider Gun</button>
            <button class="seed-btn" data-seed="acorn">Acorn</button>
            <button class="seed-btn" data-seed="r-pentomino">R-Pentomino</button>
            <button class="seed-btn" data-seed="diehard">Diehard</button>
        </div>

        <canvas id="canvas-gol" class="interactive" width="800" height="600"></canvas>
        <div id="output-gol" class="output"></div>
    </div>

    <div class="example">
        <h2>5. Molecular Dynamics Simulation</h2>
        <p>Real-time 3D physics simulation of interacting atoms using Lennard-Jones potential.</p>

        <div class="controls">
            <button id="btn-md-start">‚ñ∂ Start</button>
            <button id="btn-md-pause">‚è∏ Pause</button>
            <button id="btn-md-reset">Reset</button>
            <label>Atoms:</label>
            <input type="range" id="md-atoms" min="100" max="5000" value="1000" step="100">
            <span id="md-atoms-value">1000</span>
            <label>Temperature:</label>
            <input type="range" id="md-temp" min="1" max="100" value="30">
            <span id="md-temp-value">30</span>
        </div>

        <div style="color: #aaa; margin: 10px 0;">
            <strong>Controls:</strong> Left-click + drag to rotate | Mouse wheel to zoom | Right-click + drag to pan
        </div>

        <canvas id="canvas-md" width="1000" height="700" style="background: #000;"></canvas>
        <div id="output-md" class="output"></div>
    </div>

    <div class="example">
        <h2>6. SPH Fluid Simulation</h2>
        <p>Smoothed Particle Hydrodynamics for realistic fluid behavior with surface tension.</p>

        <div class="controls">
            <button id="btn-sph-start">‚ñ∂ Start</button>
            <button id="btn-sph-pause">‚è∏ Pause</button>
            <button id="btn-sph-reset">Reset</button>
            <button id="btn-sph-spawn">Add Water</button>
            <label>Gravity:</label>
            <input type="range" id="sph-gravity" min="0" max="100" value="50">
            <span id="sph-gravity-value">50</span>
            <label>Viscosity:</label>
            <input type="range" id="sph-viscosity" min="1" max="100" value="30">
            <span id="sph-viscosity-value">30</span>
        </div>

        <div style="color: #aaa; margin: 10px 0;">
            <strong>Interaction:</strong> Click to spawn water particles | Drag to create barriers
        </div>

        <canvas id="canvas-sph" class="interactive" width="1000" height="700" style="background: #0a0a1a;"></canvas>
        <div id="output-sph" class="output"></div>
    </div>

    <div class="example">
        <h2>7. Ray Marching: 3D Fractals</h2>
        <p>Real-time volumetric rendering of Mandelbulb and other 3D fractals.</p>

        <div class="controls">
            <label>Fractal:</label>
            <select id="fractal-type">
                <option value="mandelbulb">Mandelbulb</option>
                <option value="julia">Julia Set</option>
                <option value="menger">Menger Sponge</option>
                <option value="mandelbox">Mandelbox</option>
            </select>
            <label>Power:</label>
            <input type="range" id="fractal-power" min="2" max="12" value="8">
            <span id="fractal-power-value">8</span>
            <label>Quality:</label>
            <input type="range" id="fractal-quality" min="32" max="256" value="128" step="32">
            <span id="fractal-quality-value">128</span>
        </div>

        <div style="color: #aaa; margin: 10px 0;">
            <strong>Controls:</strong> Drag to rotate | Wheel to zoom | Auto-rotating camera
        </div>

        <canvas id="canvas-fractal" width="1000" height="700" style="background: #000;"></canvas>
        <div id="output-fractal" class="output"></div>
    </div>

    <div class="example">
        <h2>8. Boids Flocking Simulation</h2>
        <p>Craig Reynolds' algorithm simulating flocking behavior with spatial hashing.</p>

        <div class="controls">
            <button id="btn-boids-start">‚ñ∂ Start</button>
            <button id="btn-boids-pause">‚è∏ Pause</button>
            <button id="btn-boids-reset">Reset</button>
            <label>Boids:</label>
            <input type="range" id="boids-count" min="100" max="10000" value="2000" step="100">
            <span id="boids-count-value">2000</span>
            <label>Speed:</label>
            <input type="range" id="boids-speed" min="10" max="100" value="50">
            <span id="boids-speed-value">50</span>
        </div>

        <div class="seed-buttons">
            <strong style="color: #aaa; width: 100%;">Behaviors:</strong>
            <button class="boids-behavior" data-behavior="flock">Normal Flocking</button>
            <button class="boids-behavior" data-behavior="predator">Add Predator</button>
            <button class="boids-behavior" data-behavior="scatter">Scatter</button>
            <button class="boids-behavior" data-behavior="vortex">Vortex</button>
        </div>

        <div style="color: #aaa; margin: 10px 0;">
            <strong>Interaction:</strong> Click to attract boids | Right-click to repel
        </div>

        <canvas id="canvas-boids" class="interactive" width="1000" height="700" style="background: #0a0a1a;"></canvas>
        <div id="output-boids" class="output"></div>
    </div>

    <div class="example">
        <h2>9. WASM Integration: Mandelbrot Set</h2>
        <p>Uses WASM to coordinate WebGPU compute shaders for rendering the Mandelbrot fractal.</p>
        <button id="btn-wasm-mandelbrot">Run WASM + WebGPU</button>
        <canvas id="canvas-mandelbrot" width="800" height="600"></canvas>
        <div id="output-wasm-mandelbrot" class="output"></div>
    </div>

    <script type="module" src="./js/main.js"></script>
</body>
</html>
